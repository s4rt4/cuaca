<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Aplikasi Cuaca</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <style>
    :root {
      --primary: #007bff;
      --bg-light: #f4f9ff;
      --bg-dark: #1c1f26;
      --text-light: #fff;
      --text-dark: #222;
    }
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: var(--bg-light);
      color: var(--text-dark);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      transition: background 0.3s, color 0.3s;
    }
    body.dark {
      background: var(--bg-dark);
      color: var(--text-light);
    }
    .app {
      width: 400px;
      max-width: 95%;
      background: white;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
      text-align: center;
      transition: background 0.3s, color 0.3s;
    }
    body.dark .app {
      background: #2a2e38;
      color: var(--text-light);
    }
    h1 {
      margin-bottom: 15px;
      color: var(--primary);
    }
    .input-group {
      display: flex;
      margin-bottom: 20px;
    }
    input {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px 0 0 8px;
      outline: none;
      font-size: 16px;
    }
    button {
      padding: 10px 15px;
      border: none;
      background: var(--primary);
      color: white;
      font-size: 16px;
      border-radius: 0 8px 8px 0;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #0056b3;
    }
    .theme-toggle {
      margin-bottom: 15px;
      text-align: right;
    }
    .theme-toggle button {
      border-radius: 50%;
      padding: 10px;
      background: none;
      color: var(--primary);
      font-size: 20px;
    }
    .result {
      margin-top: 20px;
    }
    .temp {
      font-size: 42px;
      font-weight: bold;
      color: var(--primary);
    }
    .icon {
      font-size: 60px;
      margin: 15px 0;
      color: var(--primary);
    }
    .details {
      margin-top: 10px;
      font-size: 15px;
      text-align: left;
    }
    .details p {
      margin: 6px 0;
    }
    .details {
  margin-top: 10px;
  font-size: 15px;
  text-align: center;  /* ubah dari left jadi center */
}

  </style>
</head>
<body>
  <div class="app">
    <div class="theme-toggle">
      <button id="themeBtn"><i class="fas fa-moon"></i></button>
    </div>
    <h1><i class="fas fa-cloud-sun"></i> Weather App</h1>

    <div class="input-group">
      <input type="text" id="cityInput" placeholder="Masukkan nama kota...">
      <button onclick="getWeather()"><i class="fas fa-search"></i></button>
    </div>

    <div class="result" id="result"></div>
  </div>

  <script>
    const apiKey = "fc66d47c4cdcc642a907e5d0ec203d63"; // API key kamu
    const resultDiv = document.getElementById("result");
    const themeBtn = document.getElementById("themeBtn");

    // Toggle Tema
    function toggleTheme() {
      document.body.classList.toggle("dark");
      const isDark = document.body.classList.contains("dark");
      themeBtn.innerHTML = isDark ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
      localStorage.setItem("theme", isDark ? "dark" : "light");
    }
    themeBtn.addEventListener("click", toggleTheme);

    // Load tema tersimpan
    if (localStorage.getItem("theme") === "dark") {
      document.body.classList.add("dark");
      themeBtn.innerHTML = '<i class="fas fa-sun"></i>';
    }

    // Ambil data cuaca
    async function getWeather() {
      const city = document.getElementById("cityInput").value.trim();
      if (!city) return;

      try {
        const res = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric&lang=id`);
        const data = await res.json();

        if (data.cod !== 200) {
          resultDiv.innerHTML = `<p style="color:red">Kota tidak ditemukan!</p>`;
          return;
        }

        const icon = data.weather[0].main.toLowerCase();
        let iconClass = "fa-cloud";
        if (icon.includes("sun") || icon.includes("clear")) iconClass = "fa-sun";
        else if (icon.includes("rain")) iconClass = "fa-cloud-showers-heavy";
        else if (icon.includes("storm") || icon.includes("thunder")) iconClass = "fa-bolt";
        else if (icon.includes("snow")) iconClass = "fa-snowflake";
        else if (icon.includes("cloud")) iconClass = "fa-cloud";

        resultDiv.innerHTML = `
  <div class="temp">${Math.round(data.main.temp)}°C</div>
  <div class="icon"><i class="fas ${iconClass}"></i></div>
  <h2>${data.name}, ${data.sys.country}</h2>
  <p><i class="fas fa-info-circle"></i> ${data.weather[0].description}</p>
  <div class="details" id="weatherDetails">
    <p><i class="fas fa-temperature-high"></i> Suhu Maks: ${data.main.temp_max}°C</p>
    <p><i class="fas fa-temperature-low"></i> Suhu Min: ${data.main.temp_min}°C</p>
    <p><i class="fas fa-tint"></i> Kelembapan: ${data.main.humidity}%</p>
    <p><i class="fas fa-wind"></i> Angin: ${data.wind.speed} m/s</p>
    <p><i class="fas fa-gauge-high"></i> Tekanan: ${data.main.pressure} hPa</p>
  </div>
  <button onclick="copyWeather(event)" style="
    margin-top:15px;
    padding:8px 14px;
    border:none;
    border-radius:6px;
    background:#007bff;
    color:white;
    cursor:pointer;">
    <i class="fas fa-copy"></i> Copy Info
  </button>
`;

      } catch (err) {
        resultDiv.innerHTML = `<p style="color:red">Terjadi kesalahan mengambil data!</p>`;
      }
    }
   function copyWeather(event) {
  const details = document.getElementById("weatherDetails");
  const city = document.querySelector("#result h2")?.innerText || "";
  const desc = document.querySelector("#result p")?.innerText || "";

  // Buat text gabungan
  let text = `${city}\n${desc}\n\n${details.innerText}`;

  // Hapus baris kosong ganda
  text = text.replace(/\n\s*\n/g, '\n');

  // Copy ke clipboard
  navigator.clipboard.writeText(text).then(() => {
    const btn = event.target.closest("button");
    btn.innerHTML = "<i class='fas fa-check'></i> Copied!";
    setTimeout(() => {
      btn.innerHTML = "<i class='fas fa-copy'></i> Copy Info";
    }, 1500);
  }).catch(err => {
    alert("Clipboard tidak tersedia di browser ini!");
    console.error(err);
  });
}


  </script>
</body>
</html>
